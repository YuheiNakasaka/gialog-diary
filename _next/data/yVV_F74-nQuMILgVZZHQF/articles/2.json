{"pageProps":{"issue":{"body":"昨日gialogで作ったブログを少しカスタマイズした。\r\n\r\n具体的にはOGPの設定やTwitterボタンの設置。\r\n\r\n最初GitHubのAPIにそんなに詳しくないからYAML front-matterでIssueから渡ってくるレスポンスの種類にどんなものがあるのかわからなかった。とりあえずはGitHubの[APIリファレンス](https://docs.github.com/ja/rest/issues/issues)を読むと大体解決した。\r\n\r\nOGPの画像は記事内を正規表現で走査して最初に登場する画像を設定するようにしている。`/\\((http[s]*.+\\.(?:png|jpg|jpeg|gif))?\\)/i`みたいなやつを使っているが、後方参照のキャプチャしないやつの書き方を思い出せなくてちょっと迷った。今回はキャプチャされてもいいんだけど、気分的に無駄なキャプチャは嫌である。グローバルな一致とかだとパフォーマンス問題が起きたりするなど[詳説 正規表現](https://amzn.to/3NaYcAs)に書いてた気もするから避けられるなら避けた方が良さげ。\r\n\r\nあとちょっと困ってるのはOGP画像が仕様を超える解像度だった場合にTwitter Cardでうまく表示されない問題がある。これはどう対応したものかちょっと考えているところ。\r\n\r\nそれと雑でもいいので検索を設置したくてGoogle検索へのリンクを配置したがまだインデックスされていないから機能しない。時間が解決するのかなこれ。。\r\n\r\n\r\n最後にOGPのテスト。先日[和処黒木](https://twitter.com/kurokijiro)に行った時に八木メシでお馴染みの八木栞FSKと撮った牛しぐれうどんでも載せておく。\r\n![IMG_2962](https://user-images.githubusercontent.com/1421093/170851081-73034fa3-91c3-43be-94db-dcc08b642156.JPG)","bodyHTML":"<p>昨日gialogで作ったブログを少しカスタマイズした。</p>\n<p>具体的にはOGPの設定やTwitterボタンの設置。</p>\n<p>最初GitHubのAPIにそんなに詳しくないからYAML front-matterでIssueから渡ってくるレスポンスの種類にどんなものがあるのかわからなかった。とりあえずはGitHubの<a href=\"https://docs.github.com/ja/rest/issues/issues\">APIリファレンス</a>を読むと大体解決した。</p>\n<p>OGPの画像は記事内を正規表現で走査して最初に登場する画像を設定するようにしている。<code>/\\((http[s]*.+\\.(?:png|jpg|jpeg|gif))?\\)/i</code>みたいなやつを使っているが、後方参照のキャプチャしないやつの書き方を思い出せなくてちょっと迷った。今回はキャプチャされてもいいんだけど、気分的に無駄なキャプチャは嫌である。グローバルな一致とかだとパフォーマンス問題が起きたりするなど<a href=\"https://amzn.to/3NaYcAs\">詳説 正規表現</a>に書いてた気もするから避けられるなら避けた方が良さげ。</p>\n<p>あとちょっと困ってるのはOGP画像が仕様を超える解像度だった場合にTwitter Cardでうまく表示されない問題がある。これはどう対応したものかちょっと考えているところ。</p>\n<p>それと雑でもいいので検索を設置したくてGoogle検索へのリンクを配置したがまだインデックスされていないから機能しない。時間が解決するのかなこれ。。</p>\n<p>最後にOGPのテスト。先日<a href=\"https://twitter.com/kurokijiro\">和処黒木</a>に行った時に八木メシでお馴染みの八木栞FSKと撮った牛しぐれうどんでも載せておく。\r\n<img src=\"https://user-images.githubusercontent.com/1421093/170851081-73034fa3-91c3-43be-94db-dcc08b642156.JPG\" alt=\"IMG_2962\"></p>","active_lock_reason":null,"assignee":null,"assignees":[],"author_association":"OWNER","closed_at":null,"comments":0,"comments_url":"https://api.github.com/repos/YuheiNakasaka/gialog-diary/issues/2/comments","created_at":"2022-05-29T03:46:32Z","events_url":"https://api.github.com/repos/YuheiNakasaka/gialog-diary/issues/2/events","html_url":"https://github.com/YuheiNakasaka/gialog-diary/issues/2","id":1251778935,"labels":[],"labels_url":"https://api.github.com/repos/YuheiNakasaka/gialog-diary/issues/2/labels{/name}","locked":false,"milestone":null,"node_id":"I_kwDOHaM3jc5KnKF3","number":2,"performed_via_github_app":null,"reactions":{"+1":0,"-1":0,"confused":0,"eyes":0,"heart":0,"hooray":0,"laugh":0,"rocket":0,"total_count":0,"url":"https://api.github.com/repos/YuheiNakasaka/gialog-diary/issues/2/reactions"},"repository_url":"https://api.github.com/repos/YuheiNakasaka/gialog-diary","state":"open","state_reason":null,"timeline_url":"https://api.github.com/repos/YuheiNakasaka/gialog-diary/issues/2/timeline","title":"ブログのカスタマイズ","updated_at":"2022-05-29T03:46:32Z","url":"https://api.github.com/repos/YuheiNakasaka/gialog-diary/issues/2","user":{"avatar_url":"https://avatars.githubusercontent.com/u/1421093?v=4","events_url":"https://api.github.com/users/YuheiNakasaka/events{/privacy}","followers_url":"https://api.github.com/users/YuheiNakasaka/followers","following_url":"https://api.github.com/users/YuheiNakasaka/following{/other_user}","gists_url":"https://api.github.com/users/YuheiNakasaka/gists{/gist_id}","gravatar_id":"","html_url":"https://github.com/YuheiNakasaka","id":1421093,"login":"YuheiNakasaka","node_id":"MDQ6VXNlcjE0MjEwOTM=","organizations_url":"https://api.github.com/users/YuheiNakasaka/orgs","received_events_url":"https://api.github.com/users/YuheiNakasaka/received_events","repos_url":"https://api.github.com/users/YuheiNakasaka/repos","site_admin":false,"starred_url":"https://api.github.com/users/YuheiNakasaka/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/YuheiNakasaka/subscriptions","type":"User","url":"https://api.github.com/users/YuheiNakasaka"}},"issueComments":[{"body":"[RSSフィード](https://yuheinakasaka.github.io/gialog-diary/feed.xml)も作った。r7kamuraさんの[r7kamura/diary](https://github.com/r7kamura/diary)のコードをほぼほぼ頂戴させていただいた。\r\n\r\n仕組みとしてはすでに生成されてる記事の`issue.md`の情報を使って`getStaticProps`で`public/feed.xml`へ静的ファイルとして吐き出す。すると`https://yuheinakasaka.github.io/gialog-diary/feed.xml`という感じのURLでアクセスできる。\r\n\r\nGitHub Actionsはあんまり使いこなせてなかったけど、ちょっとしたサーバーレス環境みたいな感じで使えて便利だなーと思った。もう少し仕組みとか調べておくか。。。","bodyHTML":"<p><a href=\"https://yuheinakasaka.github.io/gialog-diary/feed.xml\">RSSフィード</a>も作った。r7kamuraさんの<a href=\"https://github.com/r7kamura/diary\">r7kamura/diary</a>のコードをほぼほぼ頂戴させていただいた。</p>\n<p>仕組みとしてはすでに生成されてる記事の<code>issue.md</code>の情報を使って<code>getStaticProps</code>で<code>public/feed.xml</code>へ静的ファイルとして吐き出す。すると<code>https://yuheinakasaka.github.io/gialog-diary/feed.xml</code>という感じのURLでアクセスできる。</p>\n<p>GitHub Actionsはあんまり使いこなせてなかったけど、ちょっとしたサーバーレス環境みたいな感じで使えて便利だなーと思った。もう少し仕組みとか調べておくか。。。</p>","author_association":"OWNER","created_at":"2022-05-29T13:10:22Z","html_url":"https://github.com/YuheiNakasaka/gialog-diary/issues/2#issuecomment-1140446177","id":1140446177,"issue_url":"https://api.github.com/repos/YuheiNakasaka/gialog-diary/issues/2","node_id":"IC_kwDOHaM3jc5D-dPh","performed_via_github_app":null,"reactions":{"+1":0,"-1":0,"confused":0,"eyes":0,"heart":0,"hooray":0,"laugh":0,"rocket":0,"total_count":0,"url":"https://api.github.com/repos/YuheiNakasaka/gialog-diary/issues/comments/1140446177/reactions"},"updated_at":"2022-05-29T13:10:22Z","url":"https://api.github.com/repos/YuheiNakasaka/gialog-diary/issues/comments/1140446177","user":{"avatar_url":"https://avatars.githubusercontent.com/u/1421093?v=4","events_url":"https://api.github.com/users/YuheiNakasaka/events{/privacy}","followers_url":"https://api.github.com/users/YuheiNakasaka/followers","following_url":"https://api.github.com/users/YuheiNakasaka/following{/other_user}","gists_url":"https://api.github.com/users/YuheiNakasaka/gists{/gist_id}","gravatar_id":"","html_url":"https://github.com/YuheiNakasaka","id":1421093,"login":"YuheiNakasaka","node_id":"MDQ6VXNlcjE0MjEwOTM=","organizations_url":"https://api.github.com/users/YuheiNakasaka/orgs","received_events_url":"https://api.github.com/users/YuheiNakasaka/received_events","repos_url":"https://api.github.com/users/YuheiNakasaka/repos","site_admin":false,"starred_url":"https://api.github.com/users/YuheiNakasaka/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/YuheiNakasaka/subscriptions","type":"User","url":"https://api.github.com/users/YuheiNakasaka"}}],"pickupArticles":[{"body":"最近ほぼ毎日カレーを食ってるんだけど、今日はなんとなくの思い付きで火鍋をカレーにしたらめちゃくちゃ美味かったので忘れないようにレシピを書き記しておく。\r\n\r\n# 材料(2人分)\r\n## A) 火鍋\r\n- 豆板醤: 大さじ1\r\n- 花椒: 小さじ1\r\n- 八角: ちょっと\r\n- 鷹の爪: 1カケラ\r\n- 桃屋のしびれと辛さががっつり効いた麻辣香油(もしない場合は普通の食べるラー油+ニンニクをガッツリ): 1/3瓶\r\n- ウェイパー: 小さじ1\r\n- 水: 300cc前後\r\n\r\n## B) 具(何入れてもOK)\r\n- とり肉: 適当\r\n- にんじん: 適当\r\n- 玉ねぎ: 適当\r\n- じゃがいも: 適当\r\n\r\n## C) カレー\r\n- S&Bのカレーフレーク(固形でも多分OKだが安物はやめろ、最低限ジャワ): 大さじ2.5\r\n\r\n## 作り方\r\n### 鍋にA)火鍋を全部投入して中火にかけて煮立たせる(15分くらい)\r\nぐつぐつの方が火鍋感が出て良い。\r\n\r\n### B)具を火が通るまで炒める\r\n具は何を入れてもOK。にんじんが美味かったのでおすすめ。\r\n\r\n### B)を火鍋に投入する\r\n具が馴染むまで少しかき混ぜる\r\n\r\n### C)カレー を鍋に投入する\r\nカレーが全体に溶け切るまで混ぜる。もしとろみが足りなければルーを足す。とろみが多すぎたら水を足せ。\r\n\r\n## 写真\r\n![IMG_3277 2](https://user-images.githubusercontent.com/1421093/183254406-995b65fb-c721-40ba-9c85-1875b49997fb.JPG)\r\n![IMG_3278](https://user-images.githubusercontent.com/1421093/183254480-e3a1a331-8210-4d2d-97d1-9f3459398007.JPG)\r\n![IMG_3281](https://user-images.githubusercontent.com/1421093/183254425-1b6ba9f0-e277-4092-8a9e-a806b5e0d38e.JPG)\r\n\r\n## 感想\r\n基本はカレーだが遠くで中華の声が聞こえるような感じの味。花椒とニンニクとシビ辛が効いていて最高。火鍋自体で出汁みたいなものが効いているので全体として味の密度が異常。\r\n\r\n[桃屋のしびれと辛さががっつり効いた麻辣香油](https://www.momoya.co.jp/shop/products/detail/115)がかなり重要なのでお近くのスーパーで買ってくれ。カレールーは固定のやつでも全然OKだがPBの安物はやめた方が良い。火鍋に味が負けるので。最低でもジャワあたりで。\r\n\r\n全体的に結構辛めなのでお腹が弱い人は注意。\r\n\r\nおすすめ。","active_lock_reason":null,"assignee":null,"assignees":[],"author_association":"OWNER","closed_at":null,"comments":0,"comments_url":"https://api.github.com/repos/YuheiNakasaka/gialog-diary/issues/17/comments","created_at":"2022-08-06T15:06:37Z","events_url":"https://api.github.com/repos/YuheiNakasaka/gialog-diary/issues/17/events","html_url":"https://github.com/YuheiNakasaka/gialog-diary/issues/17","id":1330775595,"labels":[],"labels_url":"https://api.github.com/repos/YuheiNakasaka/gialog-diary/issues/17/labels{/name}","locked":false,"milestone":null,"node_id":"I_kwDOHaM3jc5PUgYr","number":17,"performed_via_github_app":null,"reactions":{"+1":0,"-1":0,"confused":0,"eyes":0,"heart":0,"hooray":0,"laugh":0,"rocket":0,"total_count":0,"url":"https://api.github.com/repos/YuheiNakasaka/gialog-diary/issues/17/reactions"},"repository_url":"https://api.github.com/repos/YuheiNakasaka/gialog-diary","state":"open","state_reason":null,"timeline_url":"https://api.github.com/repos/YuheiNakasaka/gialog-diary/issues/17/timeline","title":"火鍋カレー","updated_at":"2022-08-06T15:10:30Z","url":"https://api.github.com/repos/YuheiNakasaka/gialog-diary/issues/17","user":{"avatar_url":"https://avatars.githubusercontent.com/u/1421093?v=4","events_url":"https://api.github.com/users/YuheiNakasaka/events{/privacy}","followers_url":"https://api.github.com/users/YuheiNakasaka/followers","following_url":"https://api.github.com/users/YuheiNakasaka/following{/other_user}","gists_url":"https://api.github.com/users/YuheiNakasaka/gists{/gist_id}","gravatar_id":"","html_url":"https://github.com/YuheiNakasaka","id":1421093,"login":"YuheiNakasaka","node_id":"MDQ6VXNlcjE0MjEwOTM=","organizations_url":"https://api.github.com/users/YuheiNakasaka/orgs","received_events_url":"https://api.github.com/users/YuheiNakasaka/received_events","repos_url":"https://api.github.com/users/YuheiNakasaka/repos","site_admin":false,"starred_url":"https://api.github.com/users/YuheiNakasaka/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/YuheiNakasaka/subscriptions","type":"User","url":"https://api.github.com/users/YuheiNakasaka"}},{"body":"[Web Development with Ruby on Rails](https://amzn.to/3N2XFRl)を読んでる。\r\n\r\nmodelにロジックは書かない、1コントローラーメソッドに対して1Serviceにしてそこに必要なビジネスロジックは詰めこむ、serviceは1メソッドしかpublicにしない、serviceのpublicなメソッドの振る舞いのみ入念にテストするという割り切った考えは前評判どおりだけど思想強ぇ〜となった。\r\n\r\nRailsでDDDとかやろうとするとドメインの整理から始まりmodelはただのDTOにしてentityやvalue object等の実装を用意して、なんというか少なくとも実装に関してはクラスがめちゃくちゃ増えていくイメージだけど著者はむしろそういうのと逆方向(というかRailsとしては自然な方向)に逆らわず標準提供されてる道具を使って、最低限のレイヤーをサステナブルという目的(ここが重要)を達成するためだけに追加するという考えだ。\r\n\r\n設計に絶対的な正解はなく、未来・要件・チーム・言語・フレームワークなどにあらゆる環境によって最適な選択は変わるという当たり前のことを思い知らされる感じ。\r\n\r\n[良いコード／悪いコードで学ぶ設計入門](https://amzn.to/3PNmkuN)を読んだあとなのでなおのことその実装方針の差が面白く感じた。\r\n\r\n良いコード設計ができるというのはこういった多種多様な設計方針や実装方法の引き出しがあり、その中から妥当なものを選択できる能力なのだろうと思う。(もっと広い意味でだけど)アーキテクチャ選択に絶対はないというのは[ソフトウェアアーキテクチャの基礎](https://amzn.to/3POoAly)でも書いてあった気がする。\r\n\r\n自分は金にならんプロジェクト(スタートアップのすぐ解散するアプリ開発や少人数開発みたいなもの)ばかりやってきたから将来性についてあまり深く考えなくてもぶっちゃけよくて、そんなに神経質に設計について固執してこなかった。そのツケみたいなもので設計に関するスキルにややコンプレックスがあるから最近はこういう本をいくつか読んで妄想したりしている。\r\n\r\n自分のようなバックグラウンドの人間からするとどんなにクソコードでも金を産むコードに対してまずはリスペクトが生まれてしまうという悲しい性。めくじらたててキレ散らかしてる人を見るとなんともいえない感情にならん訳でもない。もちろんそれとこれとは別なのは理解するが....","active_lock_reason":null,"assignee":null,"assignees":[],"author_association":"OWNER","closed_at":null,"comments":0,"comments_url":"https://api.github.com/repos/YuheiNakasaka/gialog-diary/issues/3/comments","created_at":"2022-05-30T09:55:28Z","events_url":"https://api.github.com/repos/YuheiNakasaka/gialog-diary/issues/3/events","html_url":"https://github.com/YuheiNakasaka/gialog-diary/issues/3","id":1252487542,"labels":[],"labels_url":"https://api.github.com/repos/YuheiNakasaka/gialog-diary/issues/3/labels{/name}","locked":false,"milestone":null,"node_id":"I_kwDOHaM3jc5Kp3F2","number":3,"performed_via_github_app":null,"reactions":{"+1":0,"-1":0,"confused":0,"eyes":0,"heart":0,"hooray":0,"laugh":0,"rocket":0,"total_count":0,"url":"https://api.github.com/repos/YuheiNakasaka/gialog-diary/issues/3/reactions"},"repository_url":"https://api.github.com/repos/YuheiNakasaka/gialog-diary","state":"open","state_reason":null,"timeline_url":"https://api.github.com/repos/YuheiNakasaka/gialog-diary/issues/3/timeline","title":"Web Development with Ruby on Railsと悲しい性","updated_at":"2022-05-30T09:55:55Z","url":"https://api.github.com/repos/YuheiNakasaka/gialog-diary/issues/3","user":{"avatar_url":"https://avatars.githubusercontent.com/u/1421093?v=4","events_url":"https://api.github.com/users/YuheiNakasaka/events{/privacy}","followers_url":"https://api.github.com/users/YuheiNakasaka/followers","following_url":"https://api.github.com/users/YuheiNakasaka/following{/other_user}","gists_url":"https://api.github.com/users/YuheiNakasaka/gists{/gist_id}","gravatar_id":"","html_url":"https://github.com/YuheiNakasaka","id":1421093,"login":"YuheiNakasaka","node_id":"MDQ6VXNlcjE0MjEwOTM=","organizations_url":"https://api.github.com/users/YuheiNakasaka/orgs","received_events_url":"https://api.github.com/users/YuheiNakasaka/received_events","repos_url":"https://api.github.com/users/YuheiNakasaka/repos","site_admin":false,"starred_url":"https://api.github.com/users/YuheiNakasaka/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/YuheiNakasaka/subscriptions","type":"User","url":"https://api.github.com/users/YuheiNakasaka"}},{"body":"先日Juice=Juice(ハロプロ)と山崎あおいというシンガーソングライターとの対バンライブに行ってきた。ハロプロのアイドルと他ジャンルの歌手との対バンライブは中々珍しい。どういうファンが集まるのかなと少しワクワクしていたが、ほぼ普段の現場と変わらないハロオタだらけであった。\r\n\r\nハロオタといえば大体おじさんであるが、自分もその中の一人だ。だからなのかはわからないがおじさんには親近感がある。特にアイドル現場にいるおじさんはみんな幸せそうな顔をしていて好きだ。\r\n\r\n女性アイドルのライブに行ったことのない人は想像できないかもしれないが、アラフォー・アラフィフのおじさん達がめちゃくちゃニコニコで誰の目を気にすることもなくサイリウムを振ったり踊っていたりする。たまにステージで踊っているメンバーよりキレ良く振りコピをしてるおじさんがいたりするのを見るのも良い。皆同じ方向を向いてニコニコして幸せそうな顔をしている。\r\n\r\n街中や通勤電車で見かける勤労中のおじさん、中には疲弊してヘロヘロのおじさんも結構いる。彼らは大体みんな険しい顔をしていると思うんだけど、そういうおじさん達がアイドル現場では弾けんばかりの笑顔で楽しんでいるのでその姿を見ると嬉しくなる。\r\n\r\nおっさん同士の肩組みみたいな馴れ合いは別に好きではないけど、おじさんになると基本的にうっすら全方面から嫌われるし頼れるものが少なくなっていくからみんなで同じ方向を見て好き勝手楽しめる時間ってすごく貴重だよと思った。","active_lock_reason":null,"assignee":null,"assignees":[],"author_association":"OWNER","closed_at":null,"comments":0,"comments_url":"https://api.github.com/repos/YuheiNakasaka/gialog-diary/issues/18/comments","created_at":"2022-08-18T11:51:14Z","events_url":"https://api.github.com/repos/YuheiNakasaka/gialog-diary/issues/18/events","html_url":"https://github.com/YuheiNakasaka/gialog-diary/issues/18","id":1342987594,"labels":[],"labels_url":"https://api.github.com/repos/YuheiNakasaka/gialog-diary/issues/18/labels{/name}","locked":false,"milestone":null,"node_id":"I_kwDOHaM3jc5QDF1K","number":18,"performed_via_github_app":null,"reactions":{"+1":0,"-1":0,"confused":0,"eyes":0,"heart":0,"hooray":0,"laugh":0,"rocket":0,"total_count":0,"url":"https://api.github.com/repos/YuheiNakasaka/gialog-diary/issues/18/reactions"},"repository_url":"https://api.github.com/repos/YuheiNakasaka/gialog-diary","state":"open","state_reason":null,"timeline_url":"https://api.github.com/repos/YuheiNakasaka/gialog-diary/issues/18/timeline","title":"楽しそうなおじさんを見るのが好き","updated_at":"2022-08-18T11:51:14Z","url":"https://api.github.com/repos/YuheiNakasaka/gialog-diary/issues/18","user":{"avatar_url":"https://avatars.githubusercontent.com/u/1421093?v=4","events_url":"https://api.github.com/users/YuheiNakasaka/events{/privacy}","followers_url":"https://api.github.com/users/YuheiNakasaka/followers","following_url":"https://api.github.com/users/YuheiNakasaka/following{/other_user}","gists_url":"https://api.github.com/users/YuheiNakasaka/gists{/gist_id}","gravatar_id":"","html_url":"https://github.com/YuheiNakasaka","id":1421093,"login":"YuheiNakasaka","node_id":"MDQ6VXNlcjE0MjEwOTM=","organizations_url":"https://api.github.com/users/YuheiNakasaka/orgs","received_events_url":"https://api.github.com/users/YuheiNakasaka/received_events","repos_url":"https://api.github.com/users/YuheiNakasaka/repos","site_admin":false,"starred_url":"https://api.github.com/users/YuheiNakasaka/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/YuheiNakasaka/subscriptions","type":"User","url":"https://api.github.com/users/YuheiNakasaka"}}]},"__N_SSG":true}